<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>社会组织和事业单位录入</title>
<!-- select CSS -->
<link href="/TownManagement/dist/css/bootstrap-select.css" rel="stylesheet">
<!-- 表单验证 -->
<link href="/TownManagement/dist/css/bootstrapValidator.css"  rel="stylesheet" />
</head>
<body>
	<div class="row">
		<div class="col-lg-12">
			<h3 class="page-header">社会组织和事业单位基本信息录入</h3>
		</div>
	</div>
	<div class="panel panel-default">
		<div class="panel-body">
			<form class="form-horizontal" role="form" enctype="multipart/form-data" id="comform" method="post">
				<!-- 表单 -->
				<div class="form-group">
					<label class="col-sm-2 control-label">单位名称</label>
					<div class="col-sm-6">
						<input name="orgname"  id="orgname" class="form-control" type="text" placeholder="请填写单位名称" />
					</div>
					<label class="col-sm-2 control-label">编号</label>
					<div class="col-sm-2">
						<input name="orgnumber" id="orgnumber" class="form-control" />
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">单位性质</label>
					<div class="col-sm-2">
						<select name="orgnature" id="orgnature"
							class="selectpicker show-tick form-control">
							<option></option>
							<option value="1">事业单位</option>
							<option value="2">社会组织</option>
							</select>
					</div>
					<label class="col-sm-2 control-label">单位类别</label>
					<div class="col-sm-2">
						<select name="orgcategory" id="orgcategory"
							class="selectpicker show-tick form-control">
							<option></option>
							<option value="1">研究机构</option>
							<option value="2">高校</option>
							<option value="3">社会团体</option>
							<option value="4">民办非企业单位</option>
							<option value="4">基金会</option>
						</select>
					</div>
					<label class="col-sm-2 control-label">单位类型</label>
					<div class="col-sm-2">
						<select name="orgtype" id="orgtype"
							class="selectpicker show-tick form-control">
							<option></option>
							<option value="1">部署</option>
							<option value="2">省属</option>
							<option value="3">市属</option>
							<option value="4">区县属</option>
							<option value="5">行业协会</option>
							<option value="6">民非单位</option>
							<option value="7">综合协会</option>
							<option value="8">基金会</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">发起人</label>
					<div class="col-sm-2">
						<input name="orgsponsor" id="orgsponsor" class="form-control"
							type="text" />
					</div>
					<label class="col-sm-2 control-label">关系情况</label>
					<div class="col-sm-2">
						<select name="orgrelation" id="orgrelation"
							class="selectpicker show-tick form-control">
							<option></option>
							<option value="1">待建联系</option>
							<option value="2">已建联系</option>
							<option value="3">意向联盟</option>
							<option value="4">合作联盟</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">主管部门</label>
						<div class="col-sm-6">
						<input name="orgcompetent" id="orgcompetent" class="form-control"
							type="text" />
						</div>
					<label class="col-sm-2 control-label">法人代表</label>
					<div class="col-sm-2">
						<input name="orgrepresent" id="orgrepresent" class="form-control"
							type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">注册地址</label>
					<div class="col-sm-3">
						<select name="orgregist" id="orgregist"
							class="selectpicker show-tick form-control">
							<option></option>
							<option value="1">西湖区</option>
							<option value="2">滨江区</option>
							<option value="3">下城区</option>
							<option value="4">余杭区</option>
						</select>
					</div>
					<div class="col-sm-3">
						<input name=orgregist id="orgregist" class="form-control"
							type="text">
					</div>
					<label class="col-sm-2 control-label">成立时间</label>
					<div class="col-sm-2">
						<input id="orgestablish" name="orgestablish"
							class="datepicker form-control" type="text" placeholder="">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">办公地点</label>
					<div class="col-sm-6">
						<input name="orgoffice" id="orgoffice" class="form-control"
							type="text">
					</div>
					<label class="col-sm-2 control-label">信用代码</label>
					<div class="col-sm-2">
						<input name="orgcreditcode" id="orgcreditcode"
							class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">业务范围</label>
					<div class="col-sm-10">
						<input name="orgscope"  id="orgscope"  class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">机构优势</label>
					<div class="col-sm-10">
						<select name="orgadvantaget" id="orgadvantaget"
							class="selectpicker show-tick form-control">
							<option></option>
							<option value="1">农业</option>
							<option value="2">服务业</option>
							<option value="3">工业</option>
							</select>
						</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">联系人</label>
					<div class="col-sm-2">
						<input name="orgcontact" id="orgcontact"  class="form-control" type="text" placeholder="可填写多个">
					</div>
					<label class="col-sm-2 control-label">职务</label>
					<div class="col-sm-2">
						<input name="orgpost" id="orgpost" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">联系电话</label>
					<div class="col-sm-2">
						<input name="orgcontacttel" id="orgcontacttel" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">单位官网</label>
					<div class="col-sm-6">
						<input name="orgofficeweb" id="orgofficeweb"  class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">录入员</label>
					<div class="col-sm-2">
						<input name="orgentry" id="orgentry"  class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-5 control-label"></label>
					<button type="button" id="allentry_submit" class="col-sm-2 btn btn-primary"
						style="width: auto; min-width: 90px; margin-top: 20px;">提交</button>
					<button type="button" id="allentry_update" class="col-sm-2 btn btn-primary"
						style="width: auto; min-width: 90px; margin-top: 20px;display:none;">更新</button>
					<label class="col-sm-5 control-label"></label>
					<!-- id -->
					<input type="hidden" value="" name="allid" id="allid">
				</div>
			</form>
		</div>
	</div>
	<!-- 模态框（Modal） success-->
	<div class="modal fade" id="myModal-success" tabindex="-1"
		role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
		style="padding-top: 15%;">
		<div class="modal-dialog" style="width: 300px">
			<div class="modal-content">
				<div class="modal-body" align="center">保存成功!</div>
			</div>
		</div>
	</div>
	<!-- 模态框（Modal） fail-->
	<div class="modal fade" id="myModal-fail" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true"
		style="padding-top: 15%;">
		<div class="modal-dialog" style="width: 300px">
			<div class="modal-content">
				<div class="modal-body" align="center">保存失败!</div>
			</div>
		</div>
	</div>
		<!-- Select JavaScript -->
	<script src="/TownManagement/dist/js/bootstrap-select.js"></script>
	<!-- 表单验证 -->
	<script type="text/javascript" src="/TownManagement/dist/js/bootstrapValidator.js"></script>
	<script type="text/javascript" src="/TownManagement/dist/js/language/zh_CN.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			//初始化下拉框
			$('.selectpicker').selectpicker({
				noneSelectedText : "请选择"
			});
			//表单提交
			$('#allentry_submit').click(function() {
				$('#allform').data('bootstrapValidator').validate();
				if(!$('#allform').data('bootstrapValidator').isValid()){  
		         	return ;
		         }
				/*ie11一下不支持，formdata的方法  */
				var formData = new FormData($("#allform")[0]);
				$.ajax({
					type : "post",
					url : "/TownManagement/townmanage/inserttowninfo",
					data : formData,
					dataType : 'JSON',
					cache : false,
					processData : false,
					contentType : false,
					success : function(data, status) {
							if(data.returnInfo=="success"){
							$("#myModal-success").modal('show');
							$('#myModal-success').on('hidden.bs.modal', function() {
								$.ajax({
						   	         url: '/TownManagement/pages/town/townEntry.html',
						   	         cache: false,
						   	         success: function(html){
						   	             $("#page-wrapper").html(html);
						   	         }
						   	     });
							})
						}else{
							$("#myModal-fail").modal('show');
						}
					},
					error : function() {
						$("#myModal-fail").modal('show');
					}
				});
			});
			$('#allentry_update').click(function() {
				$('#allform').data('bootstrapValidator').validate();
				if(!$('#allform').data('bootstrapValidator').isValid()){  
		         	return ;
		         }
				/*ie11一下不支持，formdata的方法  */
				var formData = new FormData($("#allform")[0]);
				$.ajax({
					type : "post",
					url : "/TownManagement/townmanage/updatetowninfo",
					data : formData,
					dataType : 'JSON',
					cache : false,
					processData : false,
					contentType : false,
					success : function(data, status) {
						if(data.returnInfo=="success"){
							$("#allinfomodal").modal('hide');
							setTimeout(function(){
								$("#allmanage-success").modal('show');
							},200);
						}
					},
					error : function() {
						$("#allmanage-fail").modal('show');
					}
				});
			});
		})
	</script>
	<!-- 时间插件 -->
	<script type="text/javascript" src="/TownManagement/tools/bootstrap-datetimepicker/bootstrap-datetimepicker.js"></script>
	<script type="text/javascript" src="/TownManagement/tools/bootstrap-datetimepicker/bootstrap-datetimepicker.zh-CN.js"></script>
	<script type="text/javascript" src="/TownManagement/js/project/regionitem.js"></script>
</body>
</html>