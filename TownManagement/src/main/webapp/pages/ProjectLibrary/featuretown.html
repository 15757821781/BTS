<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>特色小镇</title>
</head>
<!-- select CSS -->
<link href="./dist/css/bootstrap-select.css" rel="stylesheet">
<!-- 表单验证 -->
<link rel="stylesheet" href="dist/css/bootstrapValidator.css" />
<body>
	<div class="row">
		<div class="col-lg-12">
			<h3 class="page-header">特色小镇基本信息</h3>
		</div>
	</div>
	<div class="panel panel-default">
		<div class="panel-body">
			<form class="form-horizontal" role="form" id="featuretown">
				<!-- 表单 -->
				<div class="form-group">
					<!-- 一行行开始写 -->
					<label class="col-sm-2 control-label">特色小镇名称</label>
					<div class="col-sm-6">
						<input id="featuretownname" name="featuretownname"
							class="form-control" type="text" placeholder="请填写特色小镇名称" />
					</div>
					<label class="col-sm-2 control-label">编号</label>
					<div class="col-sm-2">
						<input id="featuretownnumber" name="featuretownnumber"
							class="form-control" />
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">所属地区</label>
					<div class="col-sm-2">
						<input id="attributionarea" name="attributionarea"
							class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">小镇等级</label>
					<div class="col-sm-2">
						<select name="townlevel" id="townlevel"
							class="selectpicker show-tick form-control">
							<option></option>
							<option value="省级">省级</option>
							<option value="市级">市级</option>
						</select>
					</div>
					<label class="col-sm-2 control-label">创建批次</label>
					<div class="col-sm-2">
						<input id="foundbatch" name="foundbatch" class="form-control">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">所属乡镇/街道/开发区</label>
					<div class="col-sm-2">
						<input id="towngenre" name="towngenre" class="form-control">
					</div>
					<label class="col-sm-2 control-label">地理位置</label>
					<div class="col-sm-6">
						<input id="position" name="position" class="form-control"
							type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">开发主体</label>
					<div class="col-sm-4">
						<input id="developer" name="developer" class="form-control"
							type="text">
					</div>
					<label class="col-sm-2 control-label">负责人</label>
					<div class="col-sm-2">
						<input id="developername" name="developername"
							class="form-control" type="text" placeholder="姓名">
					</div>
					<div class="col-sm-2">
						<input id="developertel" name="developertel" class="form-control"
							type="text" placeholder="电话">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">合作单位</label>
					<div class="col-sm-4">
						<input id="partner" name="partner" class="form-control"
							type="text">
					</div>
					<label class="col-sm-2 control-label">负责人</label>
					<div class="col-sm-2">
						<input id="partnername" name="partnername" class="form-control"
							type="text" placeholder="姓名">
					</div>
					<div class="col-sm-2">
						<input id="partnertel" name="partnertel" class="form-control"
							type="text" placeholder="电话">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">合作条件</label>
					<div class="col-sm-10">
						<input id="cooperatecondition" name="cooperatecondition"
							class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">功能定位</label>
					<div class="col-sm-6">
						<select name="functions" id="functions"
							class="selectpicker show-tick form-control">
							<option></option>
							<option value="休闲旅游">休闲旅游</option>
							<option value="养生旅游">养生旅游</option>
							<option value="运动">运动</option>
						</select>
					</div>
					<label class="col-sm-2 control-label">产业类别</label>
					<div class="col-sm-2">
						<select name="industrygenre" id="industrygenre"
							class="selectpicker show-tick form-control">
							<option></option>
							<option value="信息经济">信息经济</option>
							<option value="环保">环保</option>
							<option value="时尚">时尚</option>
							<option value="金融">金融</option>
							<option value="高端装备制造">高端装备制造</option>
							<option value="文化创意">文化创意</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">规划面积</label>
					<div class="col-sm-2">
						<input id="planarea" name="planarea" class="form-control"
							type="text">
					</div>
					<label class="col-sm-2 control-label">计划总投资</label>
					<div class="col-sm-2">
						<input id="planinvest" name="planinvest" class="form-control"
							type="text">
					</div>
					<label class="col-sm-2 control-label">当前进度</label>
					<div class="col-sm-2">
						<select name="schedule" id="schedule"
							class="selectpicker show-tick form-control">
							<option></option>
							<option value="进度1">进度1</option>
							<option value="进度2">进度2</option>
							<option value="进度3">进度3</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">规划内容</label>
					<div class="col-sm-10">
						<input id="plancontent" name="plancontent" class="form-control"
							type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">气候条件</label>
					<div class="col-sm-10">
						<input id="weather" name="weather" class="form-control"
							type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">现状地图</label>
					<div class="col-sm-2">
						<input id="statemap" name="statemap" class="form-control"
							type="text">
					</div>
					<label class="col-sm-2 control-label">规划方案</label>
					<div class="col-sm-2">
						<input id="programme" name="programme" class="form-control"
							type="text">
					</div>
					<label class="col-sm-2 control-label">对接人</label>
					<div class="col-sm-2">
						<input id="contacts" name="contacts" class="form-control"
							type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">交通条件</label>
					<div class="col-sm-10">
						<input id="traffic" name="traffic" class="form-control"
							type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">现状产业</label>
					<div class="col-sm-10">
						<input id="currentindustry" name="currentindustry"
							class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">规划图</label>
					<div class="col-sm-10">
						<input id="planmap" name="planmap" class="form-control"
							type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-5 control-label"></label>
					<button type="button" id="featuretown_update"
						class="col-sm-2 btn btn-primary"
						style="width: auto; min-width: 90px; margin-top: 20px;display:none;">更新</button>
					<label class="col-sm-5 control-label"></label>
					<input type="hidden" value="" name="featuretownid" id="featuretownid">
				</div>
			</form>
		</div>
	</div>
		<!-- Select JavaScript -->
	<script src="./dist/js/bootstrap-select.js"></script>
	<!-- 表单验证 -->
	<script type="text/javascript" src="./dist/js/bootstrapValidator.js"></script>
	<script type="text/javascript" src="./dist/js/language/zh_CN.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			//初始化下拉框
			$('.selectpicker').selectpicker({
				noneSelectedText : "请选择"
			});
			//特色小镇表单提交
			$('#featuretown_update').click(function() {
				$('#featuretown').data('bootstrapValidator').validate();
				if (!$('#featuretown').data('bootstrapValidator').isValid()) {
					return;
				}
				/*ie11一下不支持，formdata的方法  */
				var formData = new FormData($("#featuretown")[0]);
				$.ajax({
					type : "post",
					url : "./featuretownmanage/updatefeaturetown",
					data : formData,
					dataType : 'JSON',
					cache : false,
					processData : false,
					contentType : false,
					success : function(data,status) {
						if (data.returnInfo == "success") {
							$("#featuretownmodal").modal('hide');
							setTimeout(function(){
								$("#featuretown-success").modal('show');
								$('#featuretownManage').bootstrapTable('refresh');
							},200);
						} else {
							$("#featuretown-fail").modal('show');
						}
					},
					error : function() {
						$("#featuretown-fail").modal('show');
					}
				});
			});
			//特色小镇表单验证
			$('#featuretown').bootstrapValidator({
				message : 'This value is not valid',
				excluded : [ ':disabled' ],
				feedbackIcons : {
					valid : 'glyphicon glyphicon-ok',
					invalid : 'glyphicon glyphicon-remove',
					validating : 'glyphicon glyphicon-refresh'
					},
					fields : {
						featuretownname : {
							validators : {
								notEmpty : {
									message : '小镇名不能为空'
									}
							}
					},
					featuretownnumber : {
						validators : {
							notEmpty : {
								message : '编号不能为空'
								},
								regexp : {
									regexp : /^[0-9]*$/,
									message : '请输入整数'
									}
							}
					},
					attributionarea : {
						validators : {
							notEmpty : {
								message : '所属地区不能为空'
								}
							}
					},
					townlevel : {
						validators : {
							notEmpty : {
								message : '小镇等级不能为空'
								}
							}
					},
					foundbatch : {
						 validators : {
							notEmpty : {
								message : '创建批次不能为空'
								}
						}
					},
					towngenre : {
						validators : {
							notEmpty : {
								message : '小镇类型不能为空'
								}
							}
					},
					position : {
						validators : {
							notEmpty : {
								message : '地理位置不能为空'
								}
							}
					},
					developer : {
						validators : {
							notEmpty : {
								message : '开发主体不能为空'
								}
							}
					},
					developername : {
						validators : {
							notEmpty : {
								message : '负责人名字不能为空'
								}
							}
					},
					developertel : {
						validators : {
							notEmpty : {
								message : '负责人电话不能为空'
								},
								regexp : {
									regexp : /^[0-9]*$/,
									message : '请输入整数'
									}
							}
					},
					partner : {
						validators : {
							notEmpty : {
								message : '合作单位不能为空'
								}
							}
					},partnername : {
						validators : {
							notEmpty : {
								message : '负责人名字不能为空'
							}
						}
					},partnertel : {
						validators : {
							notEmpty : {
								message : '负责人电话不能为空'
							},
							regexp : {
								regexp : /^[0-9]*$/,
								message : '请输入整数'
							}
						}
					},cooperatecondition : {
						validators : {
							notEmpty : {
								message : '合作条件不能为空'
							}
						}
					},
					functions : {
						validators : {
							notEmpty : {
								message : '功能定位不能为空'
							}
						}
					},
					industrygenre : {
						validators : {
							notEmpty : {
								message : '产业类别不能为空'
							}
						}
					},
					planarea : {
						validators : {
							notEmpty : {
								message : '规划面积不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					planinvest : {
						validators : {
							notEmpty : {
								message : '计划总投资不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					schedule : {
						validators : {
							notEmpty : {
								message : '当前进度不能为空'
							}
						}
					},
					plancontent : {
						validators : {
							notEmpty : {
								message : '规划内容不能为空'
							}
						}
					},
					weather : {
						validators : {
							notEmpty : {
								message : '气候条件不能为空'
							}
						}
					},
					statemap : {
						validators : {
							notEmpty : {
								message : '现状地图不能为空'
							}
						}
					},
					programme : {
						validators : {
							notEmpty : {
								message : '规划方案不能为空'
							}
						}
					},
					contacts : {
						validators : {
							notEmpty : {
								message : '对接人不能为空'
							}
						}
					},
					traffic : {
						validators : {
							notEmpty : {
								message : '交通条件不能为空'
							}
						}
					},
					currentindustry : {
						validators : {
							notEmpty : {
								message : '现状产业不能为空'
							}
						}
					},
					planmap : {
						validators : {
							notEmpty : {
								message : '规划图不能为空'
							}
						}
					}
				}
			});
		})
	</script>
</body>
</html>