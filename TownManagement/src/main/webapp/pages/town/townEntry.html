<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>录入</title>
<!-- select CSS -->
<link href="./dist/css/bootstrap-select.css" rel="stylesheet">
<!-- 表单验证 -->
<link rel="stylesheet" href="dist/css/bootstrapValidator.css" />
</head>
<body>
	<div class="row">
		<div class="col-lg-12">
			<h3 class="page-header">小城镇基本信息录入</h3>
		</div>
	</div>
	<!-- /page头 -->
	<div class="panel panel-default">
		<div class="panel-body">
			<form class="form-horizontal" role="form"
				enctype="multipart/form-data" id="townform" method="post"
				action="./townmanage/inserttowninfo">
				<!-- 表单 -->
				<div class="form-group">
					<!-- 一行行开始写 -->
					<label class="col-sm-2 control-label">名称</label>
					<div class="col-sm-6">
						<input name="centertownname" class="form-control" type="text"
							placeholder="请填写小镇名称" />
					</div>
					<label class="col-sm-2 control-label">编号</label>
					<div class="col-sm-2">
						<input name="number" class="form-control" />
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">所属地区</label>
					<div class="col-sm-2">
						<input class="form-control" type="text" name="attributionarea">
					</div>
					<label class="col-sm-2 control-label">中心镇</label>
					<div class="col-sm-2">
						<select name="townlevel"
							class="selectpicker show-tick form-control">
							<option></option>
							<option>省级</option>
							<option>市级</option>
						</select>
					</div>
					<label class="col-sm-2 control-label">合作情况</label>
					<div class="col-sm-2">
						<select name="cooperation"
							class="selectpicker show-tick form-control">
							<option></option>
							<option>咨询顾问</option>
							<option>建立联系</option>
							<option>未建联系</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">镇域面积(平方公里)</label>
					<div class="col-sm-2">
						<input name="townarea" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">建成区面积(平方公里)</label>
					<div class="col-sm-2">
						<input name="builtuparea" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label"></label>
					<div class="col-sm-2"></div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">镇域人口(万人)</label>
					<div class="col-sm-2">
						<input name="townpopulation" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">其中流动人口(万人)</label>
					<div class="col-sm-2">
						<input name="floatepopulation" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label"></label>
					<div class="col-sm-2"></div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">区县级GDP(亿元)</label>
					<div class="col-sm-2">
						<input name="countygdp" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">区县级财政收入(亿元)</label>
					<div class="col-sm-2">
						<input name="countyrevenue" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">镇级财政总收入(亿元)</label>
					<div class="col-sm-2">
						<input name="townrevenue" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">是否为全国百强区县</label>
					<div class="col-sm-2">
						<select name="hundredcounties"
							class="selectpicker show-tick form-control">
							<option></option>
							<option>是</option>
							<option>否</option>
						</select>
					</div>
					<label class="col-sm-2 control-label">是否小城市试点</label>
					<div class="col-sm-2">
						<select name="citypilot"
							class="selectpicker show-tick form-control">
							<option></option>
							<option>是</option>
							<option>否</option>
						</select>
					</div>
					<label class="col-sm-2 control-label"></label>
					<div class="col-sm-2"></div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">社区</label>
					<div class="col-sm-2">
						<input name="community" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">行政村</label>
					<div class="col-sm-2">
						<input name="adminvillage" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">农业总产值</label>
					<div class="col-sm-2">
						<input name="farmingoutvalue" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">镇党委书记</label>
					<div class="col-sm-2">
						<input name="partycommittee" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">联系电话</label>
					<div class="col-sm-2">
						<input name="committelnumber" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">工业总产值</label>
					<div class="col-sm-2">
						<input name="industryoutvalue" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">镇长</label>
					<div class="col-sm-2">
						<input name="mayor" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">联系电话</label>
					<div class="col-sm-2">
						<input name="mayortelnumber" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">服务业总产值</label>
					<div class="col-sm-2">
						<input name="serviceoutvalue" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">气候条件</label>
					<div class="col-sm-10">
						<input name="weather" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">地形条件</label>
					<div class="col-sm-10">
						<input name="terrain" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">交通条件</label>
					<div class="col-sm-10">
						<input name="traffic" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">现状产业</label>
					<div class="col-sm-10">
						<input name="currentindustry" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">产业方向</label>
					<div class="col-sm-10">
						<select name="industrialorientation"
							class="selectpicker show-tick form-control" multiple
							data-live-search="false">
							<option>化纤织造</option>
							<option>五金制造</option>
						</select>
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">荣誉称号</label>
					<div class="col-sm-10">
						<input name="honorarytitle" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">历史文化及名人</label>
					<div class="col-sm-10">
						<input name="historyculture" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-2 control-label">现状地图</label>
					<div class="col-sm-2">
						<input name="statuspic" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">规划图(2015)</label>
					<div class="col-sm-2">
						<input name="planpic" class="form-control" type="text">
					</div>
					<label class="col-sm-2 control-label">对接人</label>
					<div class="col-sm-2">
						<input name="docking" class="form-control" type="text">
					</div>
				</div>
				<div class="form-group">
					<label class="col-sm-5 control-label"></label>
					<button type="submit" name="townentry_submit"
						class="col-sm-2 btn btn-primary"
						style="width: auto; min-width: 90px; margin-top: 20px;">提交</button>
					<label class="col-sm-5 control-label"></label>
				</div>
			</form>
		</div>
	</div>
	<!-- 模态框（Modal） success-->
	<div class="modal fade" id="myModal-success" tabindex="-1"
		role="dialog" aria-labelledby="myModalLabel" aria-hidden="true"
		style="padding-top: 15%;">
		<div class="modal-dialog" style="width: 300px">
			<div class="modal-content">
				<div class="modal-body" align="center">保存成功!</div>
			</div>
		</div>
	</div>
	<!-- 模态框（Modal） fail-->
	<div class="modal fade" id="myModal-fail" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel" aria-hidden="true"
		style="padding-top: 15%;">
		<div class="modal-dialog" style="width: 300px">
			<div class="modal-content">
				<div class="modal-body" align="center">保存失败!</div>
			</div>
		</div>
	</div>
	<!-- Select JavaScript -->
	<script src="./dist/js/bootstrap-select.js"></script>
	<!-- 表单验证 -->
	<script type="text/javascript" src="./dist/js/bootstrapValidator.js"></script>
	<script type="text/javascript" src="./dist/js/language/zh_CN.js"></script>
	<script type="text/javascript">
		$(document).ready(function() {
			//初始化下拉框
			$('.selectpicker').selectpicker({
				noneSelectedText : "请选择"
			});
			//初始化表单验证
			$('form').bootstrapValidator({
				message : 'This value is not valid',
				excluded : [ ':disabled' ],
				feedbackIcons : {
					valid : 'glyphicon glyphicon-ok',
					invalid : 'glyphicon glyphicon-remove',
					validating : 'glyphicon glyphicon-refresh'
				},
				fields : {
					centertownname : {
						validators : {
							notEmpty : {
								message : '小镇名不能为空'
							}
						}
					},
					number : {
						validators : {
							notEmpty : {
								message : '编号不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					townlevel : {
						validators : {
							notEmpty : {
								message : '中心镇等级不能为空'
							}
						}
					},
					attributionarea : {
						validators : {
							notEmpty : {
								message : '所属地区不能为空'
							}
						}
					},
					cooperation : {
						validators : {
							notEmpty : {
								message : '合作情況不能为空'
							}
						}
					},
					townarea : {
						validators : {
							notEmpty : {
								message : '镇域面积不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					builtuparea : {
						validators : {
							notEmpty : {
								message : '建成区面积不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					townpopulation : {
						validators : {
							notEmpty : {
								message : '镇域人口不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					floatepopulation : {
						validators : {
							notEmpty : {
								message : '流动人口不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					countygdp : {
						validators : {
							notEmpty : {
								message : '区县级GDP不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					countyrevenue : {
						validators : {
							notEmpty : {
								message : '区县级财政收入不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					townrevenue : {
						validators : {
							notEmpty : {
								message : '镇级财政总收入不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					hundredcounties : {
						validators : {
							notEmpty : {
								message : '全国百强区县不能为空'
							}
						}
					},
					citypilot : {
						validators : {
							notEmpty : {
								message : '小城市试点不能为空'
							}
						}
					},
					community : {
						validators : {
							notEmpty : {
								message : '社区数量不能为空'
							},
							regexp : {
								regexp : /^[0-9]*$/,
								message : '请输入整数'
							}
						}
					},
					adminvillage : {
						validators : {
							notEmpty : {
								message : '行政村数量不能为空'
							},
							regexp : {
								regexp : /^[0-9]*$/,
								message : '请输入整数'
							}
						}
					},
					farmingoutvalue : {
						validators : {
							notEmpty : {
								message : '农业总产值不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					partycommittee : {
						validators : {
							notEmpty : {
								message : '镇党委书记不能为空'
							}
						}
					},
					committelnumber : {
						validators : {
							notEmpty : {
								message : '联系电话不能为空'
							},
							regexp : {
								regexp : /^[0-9]*$/,
								message : '请输入整数'
							}
						}
					},
					industryoutvalue : {
						validators : {
							notEmpty : {
								message : '工业总产值不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					mayor : {
						validators : {
							notEmpty : {
								message : '镇长不能为空'
							}
						}
					},
					mayortelnumber : {
						validators : {
							notEmpty : {
								message : '联系电话不能为空'
							},
							regexp : {
								regexp : /^[0-9]*$/,
								message : '请输入整数'
							}
						}
					},
					serviceoutvalue : {
						validators : {
							notEmpty : {
								message : '服务业总产值不能为空'
							},
							regexp : {
								regexp : /^[0-9]+(.[0-9]{1,3})?$/,
								message : '请输入最多3位小数的数字'
							}
						}
					},
					weather : {
						validators : {
							notEmpty : {
								message : '气候条件不能为空'
							}
						}
					},
					terrain : {
						validators : {
							notEmpty : {
								message : '地形条件不能为空'
							}
						}
					},
					traffic : {
						validators : {
							notEmpty : {
								message : '交通条件不能为空'
							}
						}
					},
					currentindustry : {
						validators : {
							notEmpty : {
								message : '现状产业不能为空'
							}
						}
					},
					industrialorientation : {
						validators : {
							notEmpty : {
								message : '产业方向不能为空'
							}
						}
					},
					honorarytitle : {
						validators : {
							notEmpty : {
								message : '荣誉称号不能为空'
							}
						}
					},
					historyculture : {
						validators : {
							notEmpty : {
								message : '历史文化及名人不能为空'
							}
						}
					},
					statuspic : {
						validators : {
							notEmpty : {
								message : '现状地图不能为空'
							}
						}
					},
					planpic : {
						validators : {
							notEmpty : {
								message : '规划图不能为空'
							}
						}
					},
					docking : {
						validators : {
							notEmpty : {
								message : '对接人不能为空'
							},
							regexp : {
								regexp : /^[0-9]*$/,
								message : '请输入整数'
							}
						}
					}
				}
			});
			$('#townentry_submit').click(function() {
				/*ie11一下不支持，formdata的方法  */
				var formData = new FormData($("#townform")[0]);
				$.ajax({
					type : "post",
					url : "./townmanage/inserttowninfo",
					data : formData,
					dataType : 'JSON',
					cache : false,
					processData : false,
					contentType : false,
					success : function(data, status) {
						$("#myModal-success").modal('show');
						$('#townform')[0].reset();
					},
					error : function() {
						$("#myModal-fail").modal('show');
					}
				});
			});
		})
	</script>
</body>
</html>